function getNextState(a,b,c){var d=0,e=a>0,f=xSize>a+1,g=b>0,h=ySize>b+1;return e&&(g&&cells[a-1][b-1].lastAlive&&d++,cells[a-1][b].lastAlive&&d++,h&&cells[a-1][b+1].lastAlive&&d++),f&&(g&&cells[a+1][b-1].lastAlive&&d++,cells[a+1][b].lastAlive&&d++,h&&cells[a+1][b+1].lastAlive&&d++),g&&cells[a][b-1].lastAlive&&d++,h&&cells[a][b+1].lastAlive&&d++,c&&(2===d||3===d)||!c&&3===d}for(var height=Ti.Platform.displayCaps.platformHeight,width=Ti.Platform.displayCaps.platformWidth,CELL_SIZE=Math.floor(Math.min(height,width)/30),xSize=width/CELL_SIZE,ySize=height/CELL_SIZE,universe=Ti.UI.createWindow({backgroundColor:"#000",modal:!1,exitOnClose:!0}),cells=[],x=0;xSize>x;x++){cells[x]=[];for(var y=0;ySize>y;y++){var alive=Math.random()>=.5;cells[x][y]={proxy:Ti.UI.createView({height:CELL_SIZE,width:CELL_SIZE,backgroundColor:"#fff",top:y*CELL_SIZE,left:x*CELL_SIZE,touchEnabled:!1,visible:alive}),lastAlive:alive,alive:alive},universe.add(cells[x][y].proxy)}}universe.open();for(var lastTime,renderTime,genTime,proxyTime,ctr,thisTime,start,x,y,cell;;){for(x=0;xSize>x;x++)for(y=0;ySize>y;y++)cell=cells[x][y],cell.alive!==cell.lastAlive&&(cell.proxy.visible=cell.alive),cell.lastAlive=cell.alive;for(x=0;xSize>x;x++)for(y=0;ySize>y;y++)cell=cells[x][y],cell.alive=getNextState(x,y,cell.lastAlive)}